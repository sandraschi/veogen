<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Windsurf Documentation</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="Windsurf Documentation">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <link rel="icon" href="favicon.ico">
  
  <!-- Docsify CSS -->
  <link rel="stylesheet" href="plugins/docsify.min.css">
  
  <!-- Prism CSS -->
  <link rel="stylesheet" href="plugins/prism-tomorrow.css">
  <link rel="stylesheet" href="plugins/prism-css.min.css">
  <link rel="stylesheet" href="plugins/sidebar-collapse.min.css">
  
  <!-- Custom CSS -->
  <!-- <link rel="stylesheet" href="css/theme.css"> -->
  <!-- <link rel="stylesheet" href="css/sidebar.css"> -->
  <!-- <link rel="stylesheet" href="css/print.css" media="print"> -->
  
  <!-- Theme CSS Variables and Styles -->
  <style>
    :root {
      /* Light theme variables */
      --bg-color: #ffffff;
      --text-color: #333333;
      --sidebar-bg: #fafafa;
      --sidebar-text: #333333;
      --border-color: #e1e4e8;
      --link-color: #0366d6;
      --code-bg: #f6f8fa;
      --code-text: #24292e;
      --blockquote-bg: #f6f8fa;
      --blockquote-border: #dfe2e5;
      --table-border: #dfe2e5;
      --table-header-bg: #f6f8fa;
    }

    [data-theme="dark"] {
      /* Dark theme variables */
      --bg-color: #1a1a1a;
      --text-color: #e1e1e1;
      --sidebar-bg: #2d2d2d;
      --sidebar-text: #e1e1e1;
      --border-color: #404040;
      --link-color: #58a6ff;
      --code-bg: #2d2d2d;
      --code-text: #e1e1e1;
      --blockquote-bg: #2d2d2d;
      --blockquote-border: #404040;
      --table-border: #404040;
      --table-header-bg: #2d2d2d;
    }

    /* Apply theme variables */
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* Sidebar theming */
    .sidebar {
      background-color: var(--sidebar-bg);
      border-right: 1px solid var(--border-color);
    }

    .sidebar ul li a {
      color: var(--sidebar-text);
    }

    .sidebar ul li a:hover {
      color: var(--link-color);
    }

    /* Content theming */
    .markdown-section {
      background-color: var(--bg-color);
      color: var(--text-color);
    }

    .markdown-section h1,
    .markdown-section h2,
    .markdown-section h3,
    .markdown-section h4,
    .markdown-section h5,
    .markdown-section h6 {
      color: var(--text-color);
    }

    .markdown-section a {
      color: var(--link-color);
    }

    .markdown-section code {
      background-color: var(--code-bg);
      color: var(--code-text);
    }

    .markdown-section pre {
      background-color: var(--code-bg);
      border: 1px solid var(--border-color);
    }

    .markdown-section blockquote {
      background-color: var(--blockquote-bg);
      border-left: 4px solid var(--blockquote-border);
    }

    .markdown-section table {
      border: 1px solid var(--table-border);
    }

    .markdown-section table th {
      background-color: var(--table-header-bg);
    }

    .markdown-section table td,
    .markdown-section table th {
      border: 1px solid var(--table-border);
    }

    /* Theme Toggle Button */
    .theme-toggle, .console-toggle, .config-toggle {
      position: fixed;
      background: var(--theme-color, #3F51B5);
      border: none;
      font-size: 20px;
      cursor: pointer;
      z-index: 1000;
      opacity: 0.8;
      transition: all 0.3s ease;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      color: white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    
    .theme-toggle {
      right: 20px;
      top: 20px;
    }
    
    .console-toggle {
      right: 70px;
      top: 20px;
      font-family: monospace;
      font-weight: bold;
    }
    
    .config-toggle {
      right: 120px;
      top: 20px;
      font-size: 18px;
    }
    
    .theme-toggle:hover, .console-toggle:hover, .config-toggle:hover {
      opacity: 1;
      transform: scale(1.1);
    }
    
    /* Console styles */
    #console {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 200px;
      background: #1e1e1e;
      color: #f0f0f0;
      z-index: 999;
      display: none;
      border-top: 1px solid #444;
      font-family: 'Consolas', 'Monaco', monospace;
      overflow: hidden;
      resize: vertical;
      min-height: 100px;
      max-height: 80vh;
    }
    
    /* Custom resize handle */
    #console::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 8px;
      cursor: row-resize;
      background: #333;
      z-index: 1001;
    }
    
    /* Console content area */
    #console-content {
      position: absolute;
      top: 8px;
      left: 0;
      right: 0;
      bottom: 30px;
      overflow: auto;
      padding: 10px;
      box-sizing: border-box;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 13px;
      line-height: 1.5;
    }
    
    /* Console input */
    #console-input {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: #252526;
      border-top: 1px solid #444;
      padding: 5px 10px;
      box-sizing: border-box;
      display: flex;
    }
    
    #console-input span {
      color: #9cdcfe;
      margin-right: 5px;
      line-height: 20px;
    }
    
    #console-input input {
      flex: 1;
      background: transparent;
      border: none;
      color: #f0f0f0;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 13px;
      outline: none;
    }
    
    /* Console output */
    .console-output {
      white-space: pre-wrap;
      margin: 0 0 5px 0;
    }
    
    .console-prompt {
      color: #9cdcfe;
    }
    
    .console-command {
      color: #ce9178;
    }
    
    .console-message {
      color: #9cdcfe;
    }
    
    .console-error {
      color: #f48771;
    }
    
    .console-warning {
      color: #ffcc66;
    }
    
    .console-toggle.console-open {
      background: #ff5252;
    }
    
    /* Config panel styles */
    #config-panel {
      position: fixed;
      top: 0;
      right: -450px;
      width: 450px;
      height: 100%;
      background: var(--theme-bg, #fff);
      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      transition: right 0.3s ease;
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
    }
    
    #config-panel.open {
      right: 0;
    }
    
    #config-panel h3 {
      margin-top: 0;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    
    .config-section {
      margin-bottom: 20px;
    }
    
    .config-option {
      margin: 10px 0;
    }
    
    .config-option label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }
    
    .config-option select, 
    .config-option input[type="text"] {
      width: 100%;
      padding: 5px;
      border: 1px solid #ddd;
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <!-- Theme Toggle Button -->
  <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme" title="Toggle theme">
    üåì
  </button>
  
  <!-- Console Toggle Button -->
  <button id="consoleToggle" class="console-toggle" aria-label="Toggle console" title="Toggle console">
    >_
  </button>
  
  <!-- Config Toggle Button -->
  <button id="configToggle" class="config-toggle" aria-label="Settings" title="Settings">
    ‚öôÔ∏è
  </button>
  
  <!-- Docsify container -->
  <!-- Main content -->
  <div id="app">
    <!-- Cover page will be loaded here if enabled -->
    <div data-app-cover class="app-cover"></div>
    
    <!-- Main content area -->
    <div class="content">
      <div data-app-navbar></div>
      <div data-app-sidebar></div>
      <div data-app-content>
        <div data-app-loading>Loading...</div>
      </div>
    </div>
  </div>
  
  <!-- Docsify Scripts -->
  <script>
    // Initialize Docsify with configuration
    window.$docsify = {
      name: 'Windsurf Documentation',
      repo: '',
      loadSidebar: '_sidebar.md',
      coverpage: '_coverpage.md',
      auto2top: true,
      themeColor: '#3F51B5',
      executeScript: true,
      noEmoji: false,
      relativePath: true,
      maxLevel: 6,
      subMaxLevel: 6,
      loadNavbar: false,
      mergeNavbar: false,
      onlyCover: false,
      loadFooter: false,
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: 'Search',
        noData: 'No Results',
        depth: 6,
        hideOtherSidebarContent: false,
        namespace: 'windsurf-docs'
      },
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md',
        '/.*/_coverpage.md': '/_coverpage.md'
      },
      plugins: [
        function(hook) {
          hook.doneEach(function() {
            // Initialize sidebar collapse after content is loaded
            if (window.DocsifySidebarCollapse) {
              window.DocsifySidebarCollapse.init({
                sidebarHtml: true
              });
            }
          });
        }
      ]
    };
    
    // Load additional config from external file if needed
    if (window.$docsifyConfig) {
      window.$docsify = { ...window.$docsify, ...window.$docsifyConfig };
    }
    
    // Theme management
    document.addEventListener('DOMContentLoaded', function() {
      const themeToggle = document.getElementById('themeToggle');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      let currentTheme = localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');
      
      function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        themeToggle.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        currentTheme = theme;
      }
      
      // Initialize theme
      setTheme(currentTheme);
      
      // Toggle theme on button click
      themeToggle.addEventListener('click', function() {
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        setTheme(newTheme);
      });
      
      // Watch for system theme changes
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        if (!localStorage.getItem('theme')) {
          setTheme(e.matches ? 'dark' : 'light');
        }
      });
    });
  </script>
  
  <!-- Load Docsify and plugins -->
  <script src="plugins/docsify.min.js"></script>
  <!-- ALL PLUGINS COMMENTED OUT -->
  <script src="plugins/docsify-sidebar-collapse.min.js"></script>
  <!-- <script src="plugins/docsify-tabs.min.js"></script> -->
  <script src="plugins/docsify-copy-code.min.js"></script>
  <script src="plugins/prism.js"></script>
  <script src="plugins/prism-bash.min.js"></script>
  <script src="plugins/prism-javascript.min.js"></script>
  <script src="plugins/prism-python.min.js"></script>
  <script src="plugins/prism-json.min.js"></script>
  <script src="plugins/prism-yaml.min.js"></script>
  <script src="plugins/prism-powershell.min.js"></script>
  <script src="plugins/docsify-search.min.js"></script>
  <!-- <script src="plugins/docsify-sidebar-collapse.js"></script> -->
  <!-- <script src="plugins/docsify-copy-code.js"></script> -->
  <script src="plugins/docsify-pagination.js"></script>
  <!-- <script src="plugins/docsify-tabs.js"></script> -->
  
  <!-- Initialize Docsify -->
  <script>
    // Initialize Docsify
    window.$docsify = window.$docsify || {};
    
    // Debug logging
    console.log('Docsify config:', window.$docsify);
    
    // Check if sidebar is loaded
    fetch('_sidebar.md')
      .then(response => response.text())
      .then(text => console.log('Sidebar content:', text.substring(0, 200) + '...'))
      .catch(err => console.error('Error loading sidebar:', err));
      
    // Check if coverpage is loaded
    fetch('_coverpage.md')
      .then(response => response.text())
      .then(text => console.log('Coverpage content:', text.substring(0, 200) + '...'))
      .catch(err => console.error('Error loading coverpage:', err));
  </script>
  
  <!-- Initialize console and sidebar -->
  <!-- Config Panel -->
  <div id="config-panel">
    <h3>Documentation Settings</h3>
    
    <div class="config-section">
      <h4>Appearance</h4>
      <div class="config-option">
        <label for="themeSelect">Theme:</label>
        <select id="themeSelect">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="system">System Default</option>
        </select>
      </div>
      
      <div class="config-option">
        <label for="fontSize">Font Size:</label>
        <select id="fontSize">
          <option value="14px">Small</option>
          <option value="16px" selected>Medium</option>
          <option value="18px">Large</option>
          <option value="20px">Extra Large</option>
        </select>
      </div>
    </div>
    
    <div class="config-section">
      <h4>Navigation</h4>
      <div class="config-option">
        <label>
          <input type="checkbox" id="autoCollapse" checked>
          Auto-collapse sidebar
        </label>
      </div>
      <div class="config-option">
        <label>
          <input type="checkbox" id="smoothScroll" checked>
          Smooth scrolling
        </label>
      </div>
    </div>
    
    <div class="config-section">
      <h4>Features</h4>
      <div class="config-option">
        <label>
          <input type="checkbox" id="showLineNumbers" checked>
          Show line numbers
        </label>
      </div>
      <div class="config-option">
        <label>
          <input type="checkbox" id="enableSearch" checked>
          Enable search
        </label>
      </div>
    </div>
  </div>

  <script>
    // Configure console
    window.$docsify = window.$docsify || {};
    window.$docsify.console = {
      style: 'position: fixed; bottom: 0; left: 0; right: 0; height: 200px; z-index: 900;',
      showOnStart: false
    };
    
    // Initialize UI components when DOM is fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize console
      const consoleToggle = document.getElementById('consoleToggle');
      const consoleEl = document.createElement('div');
      consoleEl.id = 'console';
      
      // Create console content area
      const consoleContent = document.createElement('div');
      consoleContent.id = 'console-content';
      
      // Create console input
      const consoleInput = document.createElement('div');
      consoleInput.id = 'console-input';
      consoleInput.innerHTML = '<span>></span><input type="text" id="console-command" placeholder="Type a command...">';
      
      // Assemble console
      consoleEl.appendChild(consoleContent);
      consoleEl.appendChild(consoleInput);
      
      // Add welcome message
      const welcomeMsg = document.createElement('div');
      welcomeMsg.className = 'console-message';
      welcomeMsg.textContent = 'Windsurf Console - Type "help" for available commands';
      consoleContent.appendChild(welcomeMsg);
      
      // Command history
      const commandHistory = [];
      let historyIndex = -1;
      let currentCommand = '';
      
      document.body.appendChild(consoleEl);
      
      let consoleVisible = false;
      let isResizing = false;
      let startY, startHeight;
      
      // Load saved console height
      const savedHeight = localStorage.getItem('consoleHeight');
      if (savedHeight) {
        consoleEl.style.height = savedHeight + 'px';
      }
      
      // Toggle console visibility
      function toggleConsole(show) {
        if (show !== undefined) {
          consoleVisible = show;
        } else {
          consoleVisible = !consoleVisible;
        }
        
        consoleEl.style.display = consoleVisible ? 'block' : 'none';
        consoleToggle.classList.toggle('console-open', consoleVisible);
        
        // Focus input when console is shown
        if (consoleVisible) {
          setTimeout(() => {
            const input = document.getElementById('console-command');
            if (input) input.focus();
          }, 100);
        }
        
        // Trigger window resize to update layout
        window.dispatchEvent(new Event('resize'));
      }
      
      // Toggle on button click
      consoleToggle.addEventListener('click', () => toggleConsole());
      
      // Make console resizable
      consoleEl.addEventListener('mousedown', function(e) {
        if (e.offsetY < 10) { // Only trigger on top 10px of console
          isResizing = true;
          startY = e.clientY;
          startHeight = parseInt(document.defaultView.getComputedStyle(consoleEl).height, 10);
          e.preventDefault();
        }
      });
      
      document.addEventListener('mousemove', function(e) {
        if (!isResizing) return;
        
        const height = startHeight + (startY - e.clientY);
        const minHeight = 100;
        const maxHeight = window.innerHeight * 0.8;
        
        if (height >= minHeight && height <= maxHeight) {
          consoleEl.style.height = height + 'px';
          localStorage.setItem('consoleHeight', height);
        }
      });
      
      document.addEventListener('mouseup', function() {
        isResizing = false;
      });
      
      // Prevent text selection while resizing
      document.addEventListener('selectstart', function(e) {
        if (isResizing) {
          e.preventDefault();
          return false;
        }
      });
      
      // Toggle console with keyboard shortcut (Ctrl+`)
      document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === '`') {
          e.preventDefault();
          toggleConsole();
        }
      });
      
      // Console command handling
      document.addEventListener('DOMContentLoaded', function() {
        const commandInput = document.getElementById('console-command');
        if (!commandInput) return;
        
        // Handle command submission
        commandInput.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') {
            const command = this.value.trim();
            if (command) {
              // Add to history
              commandHistory.unshift(command);
              historyIndex = -1;
              
              // Process command
              processCommand(command);
              
              // Clear input
              this.value = '';
            }
          } 
          // Command history navigation
          else if (e.key === 'ArrowUp') {
            e.preventDefault();
            if (historyIndex < commandHistory.length - 1) {
              historyIndex++;
              this.value = commandHistory[historyIndex];
              // Move cursor to end
              this.selectionStart = this.selectionEnd = this.value.length;
            }
          } 
          else if (e.key === 'ArrowDown') {
            e.preventDefault();
            if (historyIndex > 0) {
              historyIndex--;
              this.value = commandHistory[historyIndex];
            } else if (historyIndex === 0) {
              historyIndex--;
              this.value = currentCommand;
            }
          }
        });
        
        // Save current command when typing
        commandInput.addEventListener('keyup', function(e) {
          if (e.key !== 'ArrowUp' && e.key !== 'ArrowDown') {
            currentCommand = this.value;
          }
        });
      });
      
      // Process console commands
      function processCommand(command) {
        const args = command.split(' ');
        const cmd = args[0].toLowerCase();
        
        // Create command output element
        const output = document.createElement('div');
        output.className = 'console-output';
        
        // Show the command that was entered
        const prompt = document.createElement('span');
        prompt.className = 'console-prompt';
        prompt.textContent = '> ';
        output.appendChild(prompt);
        
        const cmdSpan = document.createElement('span');
        cmdSpan.className = 'console-command';
        cmdSpan.textContent = command;
        output.appendChild(cmdSpan);
        
        document.getElementById('console-content').appendChild(output);
        
        // Process the command
        let result;
        switch(cmd) {
          case 'help':
            result = 'Available commands:\n' +
                     '  help         - Show this help message\n' +
                     '  clear        - Clear the console\n' +
                     '  theme [dark|light] - Change theme\n' +
                     '  reload       - Reload the page\n' +
                     '  version      - Show version info';
            break;
            
          case 'clear':
            document.getElementById('console-content').innerHTML = '';
            return; // Don't show any output for clear
            
          case 'theme':
            const theme = args[1] || 'dark';
            if (theme === 'dark' || theme === 'light') {
              setTheme(theme);
              result = `Theme set to ${theme} mode`;
            } else {
              result = 'Error: Theme must be either "light" or "dark"';
            }
            break;
            
          case 'reload':
            window.location.reload();
            return;
            
          case 'version':
            result = 'Windsurf Documentation Console v1.0.0\n' +
                    'Docsify v' + (window.Docsify ? Docsify.version : 'unknown');
            break;
            
          default:
            result = `Unknown command: ${cmd}. Type "help" for a list of commands.`;
        }
        
        // Display the result
        if (result) {
          const resultEl = document.createElement('div');
          resultEl.className = 'console-message';
          resultEl.textContent = result;
          document.getElementById('console-content').appendChild(resultEl);
        }
        
        // Auto-scroll to bottom
        const consoleContent = document.getElementById('console-content');
        consoleContent.scrollTop = consoleContent.scrollHeight;
      }
      
      // Initialize config panel toggle
      const configToggle = document.getElementById('configToggle');
      const configPanel = document.getElementById('config-panel');
      
      configToggle.addEventListener('click', function() {
        configPanel.classList.toggle('open');
      });
      
      // Close config panel when clicking outside
      document.addEventListener('click', function(event) {
        if (!configPanel.contains(event.target) && event.target !== configToggle) {
          configPanel.classList.remove('open');
        }
      });
      
      // Load saved settings
      function loadSettings() {
        const settings = JSON.parse(localStorage.getItem('docsifySettings') || '{}');
        
        // Apply theme
        if (settings.theme) {
          document.documentElement.setAttribute('data-theme', settings.theme);
          document.getElementById('themeSelect').value = settings.theme;
        }
        
        // Apply font size
        if (settings.fontSize) {
          document.documentElement.style.setProperty('--base-font-size', settings.fontSize);
          document.getElementById('fontSize').value = settings.fontSize;
        }
        
        // Apply other settings
        if (settings.autoCollapse !== undefined) {
          document.getElementById('autoCollapse').checked = settings.autoCollapse;
        }
        
        if (settings.smoothScroll !== undefined) {
          document.getElementById('smoothScroll').checked = settings.smoothScroll;
        }
        
        if (settings.showLineNumbers !== undefined) {
          document.getElementById('showLineNumbers').checked = settings.showLineNumbers;
        }
        
        if (settings.enableSearch !== undefined) {
          document.getElementById('enableSearch').checked = settings.enableSearch;
        }
      }
      
      // Save settings
      function saveSettings() {
        const settings = {
          theme: document.getElementById('themeSelect').value,
          fontSize: document.getElementById('fontSize').value,
          autoCollapse: document.getElementById('autoCollapse').checked,
          smoothScroll: document.getElementById('smoothScroll').checked,
          showLineNumbers: document.getElementById('showLineNumbers').checked,
          enableSearch: document.getElementById('enableSearch').checked
        };
        
        localStorage.setItem('docsifySettings', JSON.stringify(settings));
        
        // Apply theme
        document.documentElement.setAttribute('data-theme', settings.theme);
        
        // Apply font size
        document.documentElement.style.setProperty('--base-font-size', settings.fontSize);
        
        // Apply other settings
        if (window.$docsify) {
          window.$docsify.search = settings.enableSearch ? { maxAge: 86400000 } : false;
        }
      }
      
      // Add event listeners for settings changes
      document.getElementById('themeSelect').addEventListener('change', saveSettings);
      document.getElementById('fontSize').addEventListener('change', saveSettings);
      document.getElementById('autoCollapse').addEventListener('change', saveSettings);
      document.getElementById('smoothScroll').addEventListener('change', saveSettings);
      document.getElementById('showLineNumbers').addEventListener('change', saveSettings);
      document.getElementById('enableSearch').addEventListener('change', saveSettings);
      
      // Load initial settings
      loadSettings();
    });
    
    // Configure sidebar
    window.$docsify = window.$docsify || {};
    window.$docsify.sidebar = {
      toggleButton: true,
      level: '\\-',
      collapseLevel: 2,
      auto2top: true,
      nameField: 'title',
      hideMissingTitles: true
    };
    
    // ALL PLUGINS COMMENTED OUT
    // Initialize sidebar collapse after Docsify is loaded
    // window.$docsify.plugins = window.$docsify.plugins || [];
    // window.$docsify.plugins.push(function(hook, vm) {
    //   hook.doneEach(function() {
    //     if (window.DocsifySidebarCollapse) {
    //       window.DocsifySidebarCollapse.init({
    //           sidebarHtml: true,
    //           collapseAll: false
    //         });
    //       }
    //     });
    //   });
  </script>
</body>
</html>
